# STEP 1-1
=========


발생하고 있는 버그를 추적하기 위한 방법
--------

***

## 목차🧭

- [개요](#개요)
- [배경](#배경)
- [목표](#목표)
- [목표가 아닌 것](#목표가-아닌-것)
- [고려사항](#고려할-것)
- [변경점](#변경점)
***

## 개요📜

>발생하고 있는 버그를 추적하기 위해 로깅 시스템을 구현합니다.  
>이를 통해 앞으로 발생할 수 있는 모든 버그에 대해 추적하기 용이해집니다.

***   

## 배경🖼️

>현재 url-shortener 서비스는 운영중인 서비스입니다.  
하지만 간헐적으로 발생하는 버그로 인해 불안정한 상태입니다.  
이러한 상황은 당장의 버그를 수정한다해도 언제든지 반복될 수 있는 문제이기에,  
버그가 발생한 시점의 데이터를 로그로 기록할 필요 있는 상황입니다.

***

## 목표📌

1. 서비스 요청에 대한 버그 발생 시, 관련 데이터를 로그로 남기는 클래스 구현
***

## 목표가 아닌 것✂️

- 버그 수정
***

## 고려할 것🤨

- 버그가 발생한 상황이 아닌 (정상 처리된) 요청의 경우에도 로그를 남길지...
- 서비스가 구동중인 환경에 대한 Disk 정보가 존재하지 않음
***

## 계획🧱
1. **AOP 기반 로깅 시스템 구현**
   - Spring AOP의 `@Aspect` 어노테이션을 활용하여 모든 컨트롤러 요청을 가로채는 로깅 클래스 생성
   - `@Around` 어노테이션을 사용하여 요청 처리 중 발생하는 예외를 감지 및 기록
   - 정상처리된 요청도 로깅할지 여부를 고민 후 선택적으로 구현
   

2. **예외 발생 시점의 필요 데이터 로깅**
    - 발생 시각
    - 요청 URL
    - 요청 메서드
    - 예외 메시지 및 스택 트레이스


3. **로그 저장 방식 결정**
    - `logback`을 활용하여 콘솔 및 파일에 로그 기록
***

## 변경점⛔
1. **AOP 기반 로깅 시스템 구현 중**
   1. 🆕로그 파일은 최대 3일동안 유지될 수 있도록 결정 (25-02-27 이성일)
      1. 단순 오류를 추적하기 위한 성격의 로그로써 장기간 보관할 필요가 없다고 판단
      2. 가용 가능한 디스크 공간이 크지 않을 것으로 예상됨
   2. ✖️정상처리돤 요청 로깅 기능 구현 하지 않도록 결정 (25-02-27 이성일)
      1. 아직은 성능적인 개선에 대한 필요성이 크지 않음
      2. 가용 가능한 디스크 공간이 크지 않을 것으로 예상됨
***